<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Вход</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
  <h2>Авторизация через Telegram...</h2>
  <script>
    Telegram.WebApp.ready();
    const initData = Telegram.WebApp.initData;
    fetch('/auth', {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify({initData})
    })
    .then(r => r.json())
    .then(data => {
      if (data.token) {
        Telegram.WebApp.openTelegramLink(`https://t.me/your_bot_username?start=auth_${data.token}`);
        // ИЛИ: window.open('/dashboard?token=' + data.token, '_self');
        Telegram.WebApp.showAlert("✅ Успешный вход!");
      }
    })
    .catch(e => {
      Telegram.WebApp.showAlert("❌ Ошибка авторизации");
    });
  </script>
</body>
</html>